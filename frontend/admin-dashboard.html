<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>儀表板 - 小跑豬管理系統</title>
    <link rel="icon" href="assets/logo.png" type="image/png" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <link rel="stylesheet" href="css/admin-modern.css" />

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/zh-tw.js"></script>
  </head>
  <body>
    <div class="container-fluid">
      <h1 class="page-title">數據儀表板 (Dashboard)</h1>

      <div class="stats-grid">
        <div
          class="stat-card-modern border-left-success"
          id="card-total-revenue"
        >
          <div>
            <div class="stat-text-xs text-success">總營收 (已完成)</div>
            <div class="stat-number" id="stats-total-revenue">Loading...</div>
          </div>
          <div class="stat-icon text-gray-300">
            <i class="fas fa-dollar-sign"></i>
          </div>
        </div>

        <div
          class="stat-card-modern border-left-warning"
          id="card-pending-revenue"
        >
          <div>
            <div class="stat-text-xs text-warning">待付款金額</div>
            <div class="stat-number" id="stats-pending-revenue">Loading...</div>
          </div>
          <div class="stat-icon text-gray-300">
            <i class="fas fa-file-invoice-dollar"></i>
          </div>
        </div>

        <div class="stat-card-modern border-left-info" id="card-total-users">
          <div>
            <div class="stat-text-xs text-info">總會員數</div>
            <div class="stat-number" id="stats-total-users">Loading...</div>
          </div>
          <div class="stat-icon text-gray-300">
            <i class="fas fa-users"></i>
          </div>
        </div>

        <div class="stat-card-modern border-left-primary" id="card-new-users">
          <div>
            <div class="stat-text-xs text-primary">今日新註冊</div>
            <div class="stat-number" id="stats-new-users-today">Loading...</div>
          </div>
          <div class="stat-icon text-gray-300">
            <i class="fas fa-user-plus"></i>
          </div>
        </div>
      </div>

      <div class="stats-grid">
        <div class="stat-card-modern border-left-warning" id="card-pkg-pending">
          <div>
            <div class="stat-text-xs text-warning">待確認包裹</div>
            <div class="stat-number" id="stats-pkg-pending">...</div>
          </div>
          <i class="fas fa-box-open stat-icon"></i>
        </div>

        <div class="stat-card-modern border-left-info" id="card-pkg-arrived">
          <div>
            <div class="stat-text-xs text-info">已到倉包裹</div>
            <div class="stat-number" id="stats-pkg-arrived">...</div>
          </div>
          <i class="fas fa-warehouse stat-icon"></i>
        </div>

        <div class="stat-card-modern border-left-danger" id="card-ship-pending">
          <div>
            <div class="stat-text-xs text-danger">待付款訂單</div>
            <div class="stat-number" id="stats-ship-pending-payment">...</div>
          </div>
          <i class="fas fa-credit-card stat-icon"></i>
        </div>

        <div
          class="stat-card-modern border-left-primary"
          id="card-ship-processing"
        >
          <div>
            <div class="stat-text-xs text-primary">處理中訂單</div>
            <div class="stat-number" id="stats-ship-processing">...</div>
          </div>
          <i class="fas fa-truck-loading stat-icon"></i>
        </div>
      </div>

      <div class="card">
        <div class="card-header">
          <span><i class="fas fa-chart-line"></i> 詳細數據趨勢</span>
          <div style="display: flex; gap: 10px">
            <input
              type="text"
              id="report-date-range"
              class="form-control"
              style="width: 250px; height: 35px"
              placeholder="選擇日期區間..."
            />
            <button class="btn btn-primary btn-sm" id="btn-fetch-report">
              查詢
            </button>
          </div>
        </div>
        <div class="card-body">
          <div
            id="report-loading-spinner"
            style="display: none; text-align: center; padding: 20px"
          >
            <i class="fas fa-spinner fa-spin"></i> 載入數據中...
          </div>
          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px">
            <div style="height: 300px">
              <canvas id="revenueChart"></canvas>
            </div>
            <div style="height: 300px">
              <canvas id="userChart"></canvas>
            </div>
          </div>
        </div>
      </div>

      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px">
        <div class="card">
          <div class="card-header text-primary">📦 最新包裹預報</div>
          <div class="card-body p-0">
            <div class="table-responsive">
              <table class="modern-table">
                <thead>
                  <tr>
                    <th>時間</th>
                    <th>會員</th>
                    <th>商品</th>
                    <th>狀態</th>
                  </tr>
                </thead>
                <tbody id="recent-packages-table"></tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="card">
          <div class="card-header text-success">🚚 最新集運單</div>
          <div class="card-body p-0">
            <div class="table-responsive">
              <table class="modern-table">
                <thead>
                  <tr>
                    <th>時間</th>
                    <th>會員</th>
                    <th>金額</th>
                    <th>狀態</th>
                  </tr>
                </thead>
                <tbody id="recent-shipments-table"></tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="js/apiConfig.js"></script>
    <script src="js/shippingData.js"></script>
    <script src="js/admin-layout.js"></script>
    <script src="js/admin-dashboard.js"></script>
  </body>
</html>
