<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ç³»çµ±å…¨åŸŸè¨­å®š - ç®¡ç†å¾Œå°</title>
    <link rel="icon" href="assets/logo.png" type="image/png" />
    <script src="js/styleLoader.js"></script>
    <style>
      /* é ç±¤æ¨£å¼ (Tabs) - å…§åµŒä»¥ç¢ºä¿ç¨ç«‹æ€§ */
      .settings-tabs {
        display: flex;
        border-bottom: 2px solid #ddd;
        margin-bottom: 20px;
        gap: 5px;
      }
      .tab-btn {
        padding: 12px 25px;
        background: #f1f1f1;
        border: none;
        border-radius: 5px 5px 0 0;
        cursor: pointer;
        font-weight: 500;
        color: #555;
        transition: all 0.2s;
      }
      .tab-btn:hover {
        background: #e9ecef;
      }
      .tab-btn.active {
        background: var(--primary-color);
        color: white;
        font-weight: bold;
      }

      /* å…§å®¹å€å¡Š */
      .tab-content {
        display: none; /* é è¨­éš±è— */
        animation: fadeIn 0.3s ease-in-out;
      }
      .tab-content.active {
        display: block;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(5px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* JSON ç·¨è¼¯å™¨æ¨£å¼ */
      .json-editor {
        font-family: "Consolas", "Monaco", monospace;
        width: 100%;
        min-height: 300px;
        padding: 15px;
        border: 1px solid #ccc;
        border-radius: 5px;
        background: #2d2d2d;
        color: #f8f8f2;
        line-height: 1.5;
        font-size: 14px;
      }
      .json-status {
        font-size: 13px;
        margin-top: 5px;
        font-weight: bold;
      }
      .json-valid {
        color: #2ecc71;
      }
      .json-invalid {
        color: #e74c3c;
      }

      /* å€å¡Šæ¨™é¡Œ */
      .section-title {
        border-left: 4px solid var(--primary-color);
        padding-left: 10px;
        margin-bottom: 20px;
        color: #333;
      }
    </style>
  </head>
  <body>
    <div class="container" style="max-width: 1000px">
      <img src="assets/logo.png" alt="Logo" class="header-logo" />

      <div id="admin-header-container" data-title="å„€è¡¨æ¿"></div>

      <div class="settings-tabs">
        <button class="tab-btn active" data-tab="tab-rates">ğŸ’° é‹è²»è²»ç‡</button>
        <button class="tab-btn" data-tab="tab-finance">ğŸ¦ è²¡å‹™èˆ‡ç™¼ç¥¨</button>
        <button class="tab-btn" data-tab="tab-notify">ğŸ“§ é€šçŸ¥èˆ‡å…¬å‘Š</button>
        <button class="tab-btn" data-tab="tab-advanced">
          ğŸ› ï¸ é€²éšè¨­å®š (åé )
        </button>
      </div>

      <div id="tab-rates" class="tab-content active">
        <form id="form-rates">
          <div class="form-section">
            <h3 class="section-title">ğŸ“¦ å®¶å…·é¡åˆ¥è²»ç‡ (Categories)</h3>
            <p style="color: #666; font-size: 0.9em; margin-bottom: 15px">
              è¨­å®šå„é¡å®¶å…·çš„è¨ˆè²»æ¨™æº– (æ¯å…¬æ–¤/æ¯æ)ã€‚
            </p>
            <div id="rates-categories-container"></div>
          </div>

          <div class="form-section">
            <h3 class="section-title">âš™ï¸ é‹ç®—å¸¸æ•¸ (Constants)</h3>
            <div class="form-grid-2">
              <div class="form-group">
                <label>æµ·é‹ä½æ¶ˆ (MINIMUM_CHARGE)</label>
                <input
                  type="number"
                  id="const-MINIMUM_CHARGE"
                  class="form-control"
                  required
                />
              </div>
              <div class="form-group">
                <label>é«”ç©é™¤æ•¸ (VOLUME_DIVISOR)</label>
                <input
                  type="number"
                  id="const-VOLUME_DIVISOR"
                  class="form-control"
                  required
                />
              </div>
              <div class="form-group">
                <label>CBMæ›ç®—æç© (CBM_TO_CAI_FACTOR)</label>
                <input
                  type="number"
                  id="const-CBM_TO_CAI_FACTOR"
                  step="0.1"
                  class="form-control"
                  required
                />
              </div>
              <div class="form-group">
                <label>è¶…é‡é™åˆ¶ kg (OVERWEIGHT_LIMIT)</label>
                <input
                  type="number"
                  id="const-OVERWEIGHT_LIMIT"
                  class="form-control"
                />
              </div>
              <div class="form-group">
                <label>è¶…é‡è²» (OVERWEIGHT_FEE)</label>
                <input
                  type="number"
                  id="const-OVERWEIGHT_FEE"
                  class="form-control"
                />
              </div>
              <div class="form-group">
                <label>è¶…é•·é™åˆ¶ cm (OVERSIZED_LIMIT)</label>
                <input
                  type="number"
                  id="const-OVERSIZED_LIMIT"
                  class="form-control"
                />
              </div>
              <div class="form-group">
                <label>è¶…é•·è²» (OVERSIZED_FEE)</label>
                <input
                  type="number"
                  id="const-OVERSIZED_FEE"
                  class="form-control"
                />
              </div>
            </div>
          </div>
          <button type="submit" class="btn btn-primary">å„²å­˜é‹è²»è¨­å®š</button>
        </form>
      </div>

      <div id="tab-finance" class="tab-content">
        <form id="form-bank">
          <div class="form-section">
            <h3 class="section-title">ğŸ¦ éŠ€è¡ŒåŒ¯æ¬¾è³‡è¨Š</h3>
            <p style="color: #666; font-size: 0.9em; margin-bottom: 15px">
              é¡¯ç¤ºæ–¼å‰ç«¯ã€Œé›†é‹å–®å»ºç«‹æˆåŠŸã€å¾Œçš„å½ˆçª—ä¸­ã€‚
            </p>
            <div class="form-grid-2">
              <div class="form-group">
                <label>éŠ€è¡Œåç¨± (ä»£ç¢¼)</label>
                <input
                  type="text"
                  id="bank-name"
                  class="form-control"
                  placeholder="ä¾‹å¦‚ï¼šç¬¬ä¸€éŠ€è¡Œ (007)"
                />
              </div>
              <div class="form-group">
                <label>åˆ†è¡Œåç¨±</label>
                <input
                  type="text"
                  id="bank-branch"
                  class="form-control"
                  placeholder="ä¾‹å¦‚ï¼šå°å—åˆ†è¡Œ"
                />
              </div>
              <div class="form-group">
                <label>éŠ€è¡Œå¸³è™Ÿ</label>
                <input
                  type="text"
                  id="bank-account"
                  class="form-control"
                  style="color: #d32f2f; font-weight: bold"
                />
              </div>
              <div class="form-group">
                <label>æˆ¶å</label>
                <input type="text" id="bank-holder" class="form-control" />
              </div>
            </div>
            <button
              type="submit"
              class="btn btn-secondary"
              style="background-color: #27ae60"
            >
              æ›´æ–°éŠ€è¡Œè³‡è¨Š
            </button>
          </div>
        </form>

        <form id="form-invoice" style="margin-top: 30px">
          <div class="form-section">
            <h3 class="section-title">ğŸ§¾ é›»å­ç™¼ç¥¨è¨­å®š (Amego å…‰è²¿)</h3>

            <div
              class="form-group"
              style="
                background: #fff3cd;
                padding: 10px;
                border-radius: 5px;
                margin-bottom: 20px;
              "
            >
              <label
                style="font-weight: bold; display: flex; align-items: center"
              >
                <input
                  type="checkbox"
                  id="invoice-enabled"
                  style="width: 20px; height: 20px; margin-right: 10px"
                />
                å•Ÿç”¨è‡ªå‹•é–‹ç«‹ç™¼ç¥¨åŠŸèƒ½
              </label>
              <small style="display: block; margin-top: 5px; color: #856404"
                >é–‹å•Ÿå¾Œï¼Œç•¶é›†é‹å–®ç‹€æ…‹è½‰ç‚ºã€Œå·²æ”¶æ¬¾
                (PROCESSING)ã€æ™‚ï¼Œç³»çµ±å°‡è‡ªå‹•å‘¼å« API é–‹ç«‹ç™¼ç¥¨ã€‚</small
              >
            </div>

            <div class="form-grid-2">
              <div class="form-group">
                <label>API æ¨¡å¼</label>
                <select id="invoice-mode" class="form-control">
                  <option value="TEST">æ¸¬è©¦æ¨¡å¼ (Test Environment)</option>
                  <option value="PROD">æ­£å¼æ¨¡å¼ (Production)</option>
                </select>
              </div>
              <div class="form-group">
                <label>Merchant ID (å•†åº—ä»£è™Ÿ)</label>
                <input
                  type="text"
                  id="invoice-merchant-id"
                  class="form-control"
                  placeholder="ç•™ç©ºå‰‡ä½¿ç”¨ .env è¨­å®š"
                />
              </div>
              <div class="form-group" style="grid-column: 1 / -1">
                <label>Hash Key (åŠ å¯†é‡‘é‘°)</label>
                <input
                  type="password"
                  id="invoice-hash-key"
                  class="form-control"
                  placeholder="ç•™ç©ºå‰‡ä½¿ç”¨ .env è¨­å®š (å»ºè­°)"
                />
              </div>
            </div>
            <button type="submit" class="btn btn-primary">å„²å­˜ç™¼ç¥¨è¨­å®š</button>
          </div>
        </form>
      </div>

      <div id="tab-notify" class="tab-content">
        <form id="form-email">
          <div class="form-section">
            <h3 class="section-title">ğŸ“§ Email é€šçŸ¥è¨­å®š</h3>
            <div class="form-group">
              <label>å¯„ä»¶äººåç¨±</label>
              <input
                type="text"
                id="email-sender-name"
                class="form-control"
                placeholder="ä¾‹å¦‚ï¼šå°è·‘è±¬ç‰©æµä¸­å¿ƒ"
              />
            </div>
            <div class="form-group">
              <label>å¯„ä»¶äºº Email</label>
              <input
                type="email"
                id="email-sender-addr"
                class="form-control"
                placeholder="å¿…é ˆæ˜¯ SendGrid é©—è­‰éçš„ Sender"
              />
            </div>
            <div class="form-group">
              <label>ç®¡ç†å“¡æ”¶ä»¶åˆ—è¡¨ (æ–°è¨‚å–®é€šçŸ¥)</label>
              <textarea
                id="email-recipients"
                class="form-control"
                rows="3"
                placeholder="è¼¸å…¥ Emailï¼Œå¤šå€‹è«‹ç”¨é€—è™Ÿ (,) åˆ†éš”"
              ></textarea>
              <small style="color: #666"
                >ç•¶å®¢æˆ¶å»ºç«‹é›†é‹å–®æ™‚ï¼Œç³»çµ±æœƒç™¼ä¿¡é€šçŸ¥é€™äº›ä¿¡ç®±ã€‚</small
              >
            </div>
            <button type="submit" class="btn btn-secondary">
              æ›´æ–° Email è¨­å®š
            </button>
          </div>
        </form>

        <form id="form-announcement" style="margin-top: 30px">
          <div class="form-section">
            <h3 class="section-title">ğŸ“¢ ç¶²ç«™å…¨åŸŸå…¬å‘Š</h3>
            <div class="form-group">
              <label style="display: flex; align-items: center">
                <input
                  type="checkbox"
                  id="announcement-enabled"
                  style="width: 20px; height: 20px; margin-right: 10px"
                />
                å•Ÿç”¨å…¬å‘Šé¡¯ç¤º
              </label>
            </div>
            <div class="form-group">
              <label>å…¬å‘Šå…§å®¹</label>
              <textarea
                id="announcement-text"
                class="form-control"
                rows="2"
                placeholder="ä¾‹å¦‚ï¼šå› é¢±é¢¨å½±éŸ¿ï¼Œæ˜æ—¥æš«åœå‡ºè²¨..."
              ></textarea>
            </div>
            <div class="form-group">
              <label>èƒŒæ™¯é¡è‰²</label>
              <select id="announcement-color" class="form-control">
                <option value="info">è—è‰² (è³‡è¨Š)</option>
                <option value="warning">é»ƒè‰² (è­¦å‘Š)</option>
                <option value="danger">ç´…è‰² (ç·Šæ€¥)</option>
                <option value="success">ç¶ è‰² (æˆåŠŸ)</option>
              </select>
            </div>
            <button type="submit" class="btn btn-primary">ç™¼å¸ƒå…¬å‘Š</button>
          </div>
        </form>
      </div>

      <div id="tab-advanced" class="tab-content">
        <form id="form-remote">
          <div class="form-section">
            <h3 class="section-title">â›°ï¸ åé åœ°å€åˆ—è¡¨ (JSON)</h3>
            <p
              style="
                background: #e8f4f8;
                padding: 10px;
                border-radius: 5px;
                color: #0c5460;
              "
            >
              <strong>èªªæ˜ï¼š</strong>
              æ­¤è™•å®šç¾©ã€Œé‹è²»è©¦ç®—ã€èˆ‡ã€Œé›†é‹å–®ã€çš„åé åœ°å€åŠ åƒ¹è¦å‰‡ã€‚<br />
              æ ¼å¼ç‚º JSON ç‰©ä»¶ï¼š<code>"è²»ç”¨": ["åœ°å€1", "åœ°å€2", ...]</code
              >ã€‚<br />
              è«‹è¬¹æ…ç·¨è¼¯ï¼Œæ ¼å¼éŒ¯èª¤å¯èƒ½å°è‡´å‰å°é¸å–®ç„¡æ³•é¡¯ç¤ºã€‚
            </p>

            <textarea
              id="remote-areas-json"
              class="json-editor"
              spellcheck="false"
            ></textarea>
            <div id="json-validation-msg" class="json-status"></div>

            <div style="margin-top: 15px; text-align: right">
              <button
                type="button"
                id="btn-format-json"
                class="btn btn-secondary"
                style="width: auto; margin-right: 10px"
              >
                æ ¼å¼åŒ– JSON
              </button>
              <button type="submit" class="btn btn-danger" style="width: auto">
                ç¢ºèªä¸¦è¦†è“‹è¨­å®š
              </button>
            </div>
          </div>
        </form>
      </div>
    </div>
    <script src="js/apiConfig.js"></script>
    <script src="js/admin-settings.js"></script>
  </body>
</html>
