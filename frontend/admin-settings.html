<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <title>系統設定 - 小跑豬後台</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" href="css/admin-modern.css" />
    <style>
      .settings-tab-nav {
        display: flex;
        background: white;
        border-bottom: 1px solid #e3e6f0;
        padding: 0 20px;
      }
      .tab-btn {
        padding: 15px 25px;
        cursor: pointer;
        border-bottom: 3px solid transparent;
        color: #858796;
        font-weight: 600;
        transition: 0.2s;
      }
      .tab-btn:hover {
        color: #4e73df;
      }
      .tab-btn.active {
        color: #4e73df;
        border-bottom-color: #4e73df;
      }
      .tab-content {
        display: none;
        padding: 20px;
      }
      .tab-content.active {
        display: block;
      }
    </style>
  </head>
  <body>
    <div class="container-fluid">
      <h1 class="page-title">系統全域設定</h1>

      <div class="card">
        <div class="settings-tab-nav">
          <div class="tab-btn active" data-tab="tab-rates">
            <i class="fas fa-calculator"></i> 運費費率
          </div>
          <div class="tab-btn" data-tab="tab-sys">
            <i class="fas fa-bullhorn"></i> 公告與系統
          </div>
          <div class="tab-btn" data-tab="tab-bank">
            <i class="fas fa-university"></i> 銀行資訊
          </div>
        </div>

        <div id="tab-rates" class="tab-content active">
          <form id="form-rates">
            <h5 class="text-primary font-weight-bold mb-3">全域運算常數</h5>
            <div
              style="
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 20px;
              "
            >
              <div>
                <label>海運低消 (NT$)</label>
                <input
                  type="number"
                  id="const-MINIMUM_CHARGE"
                  class="form-control"
                  required
                />
              </div>
              <div>
                <label>材積換算係數 (Divisor)</label>
                <input
                  type="number"
                  id="const-VOLUME_DIVISOR"
                  class="form-control"
                  placeholder="28317"
                  required
                />
              </div>
              <div>
                <label>CBM 轉材積係數</label>
                <input
                  type="number"
                  step="0.1"
                  id="const-CBM_TO_CAI_FACTOR"
                  class="form-control"
                  placeholder="35.3"
                />
              </div>
            </div>

            <hr class="my-4" />

            <h5 class="text-primary font-weight-bold mb-3">家具類別費率</h5>
            <div id="categories-container">
              <div class="p-3 bg-light rounded mb-3 border">
                <strong>一般家具 (General)</strong>
                <div class="d-flex gap-3 mt-2">
                  <div style="flex: 1">
                    <label class="small text-muted">重量費率 ($/kg)</label
                    ><input
                      id="rate-general-weight"
                      type="number"
                      step="0.1"
                      class="form-control"
                    />
                  </div>
                  <div style="flex: 1">
                    <label class="small text-muted">材積費率 ($/材)</label
                    ><input
                      id="rate-general-volume"
                      type="number"
                      step="0.1"
                      class="form-control"
                    />
                  </div>
                </div>
              </div>
            </div>

            <div style="text-align: right">
              <button type="submit" class="btn btn-success btn-lg">
                <i class="fas fa-save"></i> 儲存費率設定
              </button>
            </div>
          </form>
        </div>

        <div id="tab-sys" class="tab-content">
          <form id="form-announcement">
            <div class="form-group mb-3">
              <label class="font-weight-bold">前台全域公告</label>
              <textarea
                id="ann-text"
                class="form-control"
                rows="3"
                placeholder="例如：因颱風影響，船期延誤..."
              ></textarea>
              <small class="text-muted">此訊息將顯示於會員首頁頂端。</small>
            </div>
            <div class="form-check mb-4">
              <input
                type="checkbox"
                id="ann-enabled"
                style="transform: scale(1.2)"
              />
              <label for="ann-enabled" style="margin-left: 5px"
                >啟用公告顯示</label
              >
            </div>

            <div class="form-group mb-3">
              <label>公告顏色</label>
              <select
                id="ann-color"
                class="form-control"
                style="max-width: 200px"
              >
                <option value="info">藍色 (資訊)</option>
                <option value="warning">黃色 (警告)</option>
                <option value="danger">紅色 (緊急)</option>
                <option value="success">綠色 (成功)</option>
              </select>
            </div>

            <button type="submit" class="btn btn-primary">
              <i class="fas fa-bullhorn"></i> 更新公告
            </button>
          </form>
        </div>

        <div id="tab-bank" class="tab-content">
          <form id="form-bank">
            <div class="alert alert-info">
              此資訊將顯示於會員建立訂單後的匯款提示彈窗中。
            </div>
            <div class="form-group mb-3">
              <label>銀行名稱 (含代碼)</label>
              <input
                type="text"
                id="bank-name"
                class="form-control"
                placeholder="例如：第一銀行 (007)"
              />
            </div>
            <div class="form-group mb-3">
              <label>分行名稱</label>
              <input
                type="text"
                id="bank-branch"
                class="form-control"
                placeholder="例如：台南分行"
              />
            </div>
            <div class="form-group mb-3">
              <label>銀行帳號</label>
              <input
                type="text"
                id="bank-account"
                class="form-control"
                style="font-family: monospace; font-weight: bold"
              />
            </div>
            <div class="form-group mb-4">
              <label>戶名</label>
              <input type="text" id="bank-holder" class="form-control" />
            </div>
            <button type="submit" class="btn btn-primary">
              <i class="fas fa-university"></i> 更新匯款資料
            </button>
          </form>
        </div>
      </div>
    </div>

    <script src="js/apiConfig.js"></script>
    <script src="js/admin-layout.js"></script>
    <script src="js/admin-settings.js"></script>
  </body>
</html>
