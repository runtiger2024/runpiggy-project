{ type: uploaded file fileName:
runtiger2024/runpiggy-project/runpiggy-project-6e49411d044a97c32fb131d798013361eca5691a/frontend/dashboard.html
fullContent:
<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <title>æœƒå“¡ä¸­å¿ƒ | æˆ‘çš„é›†é‹</title>
    <link rel="icon" href="assets/logo.png" type="image/png" />
    <script src="js/styleLoader.js"></script>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      .preview-container {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin-top: 10px;
      }
      .preview-container img {
        width: 60px;
        height: 60px;
        object-fit: cover;
        border-radius: 4px;
        border: 1px solid #ddd;
      }
      .btn-mini {
        padding: 4px 12px;
        font-size: 12px;
        height: 32px;
        line-height: 1;
        width: auto !important;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 5px;
      }
    </style>
  </head>
  <body class="dashboard-theme">
    <div class="container dashboard-container">
      <header class="dashboard-header">
        <div class="header-left">
          <img src="assets/logo.png" alt="Logo" class="header-logo-sm" />
          <h1>æœƒå“¡ä¸­å¿ƒ</h1>
        </div>
        <div
          class="header-right-actions"
          style="display: flex; align-items: center; gap: 15px"
        >
          <div class="notification-wrapper" style="position: relative">
            <div
              id="btn-notification"
              style="
                cursor: pointer;
                font-size: 20px;
                color: #555;
                padding: 5px;
              "
            >
              <i class="fas fa-bell"></i>
              <span
                id="notification-badge"
                class="notification-badge"
                style="display: none"
                >0</span
              >
            </div>
            <div
              id="notification-dropdown"
              class="notification-dropdown"
              style="display: none"
            >
              <div class="dropdown-header">
                <span>é€šçŸ¥ä¸­å¿ƒ</span>
                <button id="btn-read-all" class="btn-text">å…¨éƒ¨å·²è®€</button>
              </div>
              <div id="notification-list" class="dropdown-body">
                <div
                  class="empty-state"
                  style="padding: 20px; text-align: center; color: #999"
                >
                  è¼‰å…¥ä¸­...
                </div>
              </div>
            </div>
          </div>
          <nav class="main-nav header-nav-right"></nav>
        </div>
      </header>

      <div id="message-box" class="alert" style="display: none"></div>

      <div class="user-profile-card">
        <div class="profile-bg"></div>
        <div class="profile-content">
          <div class="avatar-circle"><i class="fas fa-user"></i></div>
          <div class="profile-details">
            <h2 id="welcome-message">æ­¡è¿å›ä¾†</h2>
            <div class="user-meta">
              <span class="meta-item"
                ><i class="fas fa-envelope"></i>
                <span id="user-email">...</span></span
              >
              <span class="meta-item"
                ><i class="fas fa-phone"></i>
                <span id="user-phone">...</span></span
              >
            </div>
            <div class="user-address">
              <i class="fas fa-map-marker-alt"></i>
              <span id="user-address">...</span>
            </div>
          </div>

          <div
            class="wallet-balance-card"
            onclick="document.getElementById('tab-wallet').click()"
            title="é»æ“ŠæŸ¥çœ‹éŒ¢åŒ…è©³æƒ…"
          >
            <div class="wb-label"><i class="fas fa-coins"></i> éŒ¢åŒ…é¤˜é¡</div>
            <div class="wb-amount" id="header-wallet-balance">...</div>
            <div class="wb-action"><i class="fas fa-plus-circle"></i> å„²å€¼</div>
          </div>

          <div class="profile-actions">
            <button
              id="btn-edit-profile"
              class="btn btn-secondary btn-mini btn-edit-profile"
            >
              <i class="fas fa-pen"></i> ç·¨è¼¯
            </button>
            <button
              id="btn-change-password"
              class="btn btn-outline-primary btn-mini"
              style="background: #fff"
            >
              <i class="fas fa-key"></i> ä¿®æ”¹å¯†ç¢¼
            </button>
          </div>
        </div>
      </div>

      <div
        id="draft-queue-container"
        class="notice-card warning"
        style="display: none"
      >
        <div
          class="notice-content"
          style="
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #ffc107;
          "
        >
          <h4 style="margin-top: 0; color: #856404">
            <i class="fas fa-clock"></i> å¾…è™•ç†çš„è©¦ç®—åŒ…è£¹
          </h4>
          <p style="margin: 5px 0">æ‚¨æœ‰å¾è©¦ç®—è¡¨å¸¶å…¥çš„å•†å“ï¼Œå°‡ä¾åºè‡ªå‹•å¡«å…¥ï¼š</p>
          <ul id="draft-queue-list" style="margin: 0; padding-left: 20px"></ul>
        </div>
      </div>

      <div class="section-card forecast-section">
        <div
          class="card-header"
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
          "
        >
          <h3><i class="fas fa-box-open"></i> é å ±æ–°åŒ…è£¹</h3>
          <div style="display: flex; gap: 5px">
            <button
              id="btn-claim-package"
              class="btn btn-sm btn-outline-primary"
              style="width: auto; font-size: 12px"
            >
              <i class="fas fa-search"></i> èªé ˜ç„¡ä¸»ä»¶
            </button>
            <button
              id="btn-bulk-forecast"
              class="btn btn-sm btn-secondary"
              style="width: auto; font-size: 12px"
            >
              <i class="fas fa-file-excel"></i> æ‰¹é‡åŒ¯å…¥
            </button>
          </div>
        </div>
        <div class="card-body">
          <div
            id="forecast-warning-box"
            class="alert alert-error"
            style="display: none; margin-bottom: 15px; font-weight: bold"
          ></div>
          <div
            class="alert alert-warning"
            style="
              display: block;
              font-size: 13px;
              background-color: #fff3cd;
              color: #856404;
              border: 1px solid #ffeeba;
              margin-bottom: 15px;
            "
          >
            <i class="fas fa-exclamation-triangle"></i>
            <strong>é‡è¦æé†’ï¼š</strong> è‹¥æ‚¨çš„å–®ä»¶åŒ…è£¹é‡é‡è¶…é
            100kgï¼Œè«‹å‹™å¿…ç¢ºèªå°ç£æ”¶ä»¶ç«¯å¯<strong>è‡ªè¡Œå®‰æ’å †é«˜æ©Ÿ</strong>å¸è²¨ã€‚
          </div>
          <form id="forecast-form" class="forecast-form-grid">
            <div class="form-group">
              <label class="required">ç‰©æµå–®è™Ÿ</label>
              <input
                type="text"
                id="trackingNumber"
                class="form-control"
                placeholder="æƒææˆ–è¼¸å…¥å–®è™Ÿ"
                required
              />
            </div>
            <div class="form-group">
              <label class="required">å•†å“åç¨±</label>
              <input
                type="text"
                id="productName"
                class="form-control"
                placeholder="ä¾‹ï¼šæ›¸æ¡Œ"
                required
              />
            </div>
            <div class="form-group short">
              <label>æ•¸é‡</label>
              <input
                type="number"
                id="quantity"
                class="form-control"
                value="1"
                min="1"
              />
            </div>
            <div class="form-group short">
              <label>ç…§ç‰‡ (å ±é—œç”¨)</label>
              <input
                type="file"
                id="images"
                multiple
                accept="image/*"
                style="display: none"
              />
              <div
                id="forecast-uploader"
                class="image-uploader-container"
              ></div>
            </div>
            <div class="form-group full">
              <label>å‚™è¨»</label>
              <input
                type="text"
                id="note"
                class="form-control"
                placeholder="ç‰¹æ®Šéœ€æ±‚..."
              />
            </div>
            <div class="form-group full" style="text-align: right">
              <button type="submit" class="btn btn-primary btn-add-cart">
                <i class="fas fa-plus-circle"></i> æäº¤é å ±
              </button>
            </div>
          </form>
        </div>
      </div>

      <div class="dashboard-tabs">
        <button id="tab-packages" class="tab-btn active">
          <i class="fas fa-boxes"></i> æˆ‘çš„åŒ…è£¹
        </button>
        <button id="tab-shipments" class="tab-btn">
          <i class="fas fa-shipping-fast"></i> æˆ‘çš„é›†é‹å–®
        </button>
        <button id="tab-recipients" class="tab-btn">
          <i class="fas fa-address-book"></i> å¸¸ç”¨æ”¶ä»¶äºº
        </button>
        <button id="tab-wallet" class="tab-btn">
          <i class="fas fa-wallet"></i> æˆ‘çš„éŒ¢åŒ…
        </button>
      </div>

      <div id="packages-section" class="tab-content active">
        <div id="section-container-packages"></div>
      </div>
      <div id="shipments-section" class="tab-content" style="display: none">
        <div id="section-container-shipments"></div>
      </div>
      <div id="recipient-section" class="tab-content" style="display: none">
        <div id="section-container-recipients"></div>
      </div>
      <div id="wallet-section" class="tab-content" style="display: none">
        <div id="section-container-wallet"></div>
      </div>

      <nav class="mobile-bottom-nav" id="mobile-bottom-nav"></nav>
    </div>

    <div id="modal-container-profile-edit"></div>
    <div id="modal-container-password-change"></div>
    <div id="modal-container-shipment-create"></div>
    <div id="modal-container-deposit"></div>
    <div id="modal-container-bulk-forecast"></div>
    <div id="modal-container-claim-package"></div>

    <div id="edit-package-modal" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <button class="modal-close">&times;</button>
        <h3>ç·¨è¼¯åŒ…è£¹</h3>
        <input type="hidden" id="edit-package-id" />
        <form id="edit-package-form">
          <div class="form-group">
            <label class="required">ç‰©æµå–®è™Ÿ</label>
            <input
              type="text"
              id="edit-trackingNumber"
              class="form-control"
              required
            />
          </div>
          <div class="form-group">
            <label class="required">å•†å“åç¨±</label>
            <input
              type="text"
              id="edit-productName"
              class="form-control"
              required
            />
          </div>
          <div class="form-group">
            <label>æ•¸é‡</label>
            <input
              type="number"
              id="edit-quantity"
              class="form-control"
              min="1"
            />
          </div>
          <div class="form-group">
            <label>å‚™è¨»</label>
            <input type="text" id="edit-note" class="form-control" />
          </div>
          <div class="form-group">
            <label>ç¾æœ‰ç…§ç‰‡:</label>
            <div
              id="edit-package-images-container"
              class="preview-container"
            ></div>
          </div>
          <div class="form-group">
            <label style="color: #1a73e8"
              ><i class="fas fa-plus"></i> è£œå‚³æ–°ç…§ç‰‡</label
            >
            <input
              type="file"
              id="edit-package-new-images"
              multiple
              accept="image/*"
              style="display: none"
            />
            <div
              id="edit-package-uploader"
              class="image-uploader-container"
            ></div>
          </div>
          <button type="submit" class="btn btn-primary">å„²å­˜è®Šæ›´</button>
        </form>
      </div>
    </div>

    <div
      id="recipient-selector-modal"
      class="modal-overlay"
      style="display: none; z-index: 1100"
    >
      <div class="modal-content">
        <button class="modal-close">&times;</button>
        <h3>é¸æ“‡å¸¸ç”¨æ”¶ä»¶äºº</h3>
        <div
          id="recipient-selector-list"
          class="recipient-selector-list"
          style="max-height: 300px; overflow-y: auto"
        ></div>
      </div>
    </div>

    <div id="bank-info-modal" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <button class="modal-close">&times;</button>
        <h3 style="text-align: center; color: #28a745">
          <i class="fas fa-check-circle"></i> è¨‚å–®å»ºç«‹æˆåŠŸï¼
        </h3>
        <div
          class="bank-details"
          style="
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
          "
        >
          <p>è«‹åŒ¯æ¬¾è‡³ï¼š</p>
          <div class="bank-row">
            <strong>éŠ€è¡Œï¼š</strong><span id="bank-name">ç¬¬ä¸€éŠ€è¡Œ (007)</span>
          </div>
          <div class="bank-row">
            <strong>å¸³è™Ÿï¼š</strong
            ><span id="bank-account" style="color: #d32f2f; font-weight: bold"
              >60110066477</span
            >
          </div>
          <div class="bank-row">
            <strong>æˆ¶åï¼š</strong><span id="bank-holder">è·‘å¾—å¿«åœ‹éš›è²¿æ˜“</span>
          </div>
          <button
            id="btn-copy-bank-info"
            class="btn btn-secondary btn-sm"
            style="width: 100%; margin-top: 10px"
          >
            è¤‡è£½è³‡è¨Š
          </button>
        </div>
        <div
          class="modal-footer"
          style="text-align: center; margin-top: 20px; display: flex; gap: 10px"
        >
          <button class="btn btn-secondary modal-close-btn" style="flex: 1">
            ç¨å¾Œä¸Šå‚³
          </button>
          <button
            id="btn-upload-now"
            class="btn btn-primary"
            style="flex: 1; background-color: #e67e22; border-color: #e67e22"
          >
            <i class="fas fa-camera"></i> ç«‹å³ä¸Šå‚³æ†‘è­‰
          </button>
        </div>
      </div>
    </div>

    <div id="upload-proof-modal" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <button class="modal-close">&times;</button>
        <h3>ä¸Šå‚³ä»˜æ¬¾æ†‘è­‰</h3>
        <div
          id="upload-proof-bank-info"
          style="
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px dashed #ccc;
            font-size: 14px;
            line-height: 1.6;
          "
        >
          <p style="margin: 0; color: #666; text-align: center">
            è¼‰å…¥åŒ¯æ¬¾è³‡è¨Šä¸­...
          </p>
        </div>
        <input type="hidden" id="upload-proof-id" />
        <form id="upload-proof-form">
          <div class="form-group">
            <input
              type="file"
              id="proof-file"
              accept="image/*"
              class="form-control"
              required
            />
          </div>
          <button type="submit" class="btn btn-primary">ä¸Šå‚³</button>
        </form>
      </div>
    </div>

    <div id="package-details-modal" class="modal-overlay" style="display: none">
      <div class="modal-content modal-lg">
        <button class="modal-close">&times;</button>
        <h3>åŒ…è£¹å…¥åº«è©³æƒ…</h3>
        <div id="details-boxes-list" style="margin-bottom: 15px"></div>
        <div
          class="detail-total-row"
          style="text-align: right; font-weight: bold"
        >
          <span>ç¸½é‡ï¼š<span id="details-total-weight"></span> kg</span
          ><span style="margin-left: 15px"
            >é‹è²»ï¼š<span id="details-total-fee" style="color: #d32f2f"></span
          ></span>
        </div>
        <hr />
        <h4>å€‰åº«å¯¦æ‹</h4>
        <div
          id="details-images-gallery"
          style="
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 10px;
          "
        ></div>
        <button
          class="btn btn-secondary modal-close-btn"
          style="margin-top: 15px; width: 100%"
        >
          é—œé–‰
        </button>
      </div>
    </div>

    <div
      id="shipment-details-modal"
      class="modal-overlay"
      style="display: none"
    >
      <div class="modal-content modal-lg">
        <button class="modal-close">&times;</button>
        <h3>è¨‚å–®è©³æƒ…</h3>
        <div
          class="modal-body"
          style="max-height: 70vh; overflow-y: auto; padding: 10px"
        >
          <div class="modal-section-title">ğŸ“ è¨‚å–®è³‡è¨Š</div>
          <div class="info-grid-responsive">
            <div><strong>è¨‚å–®ç·¨è™Ÿ:</strong> <span id="sd-id"></span></div>
            <div><strong>ç‹€æ…‹:</strong> <span id="sd-status"></span></div>
            <div><strong>å»ºç«‹æ—¥æœŸ:</strong> <span id="sd-date"></span></div>
            <div>
              <strong>å°ç£å–®è™Ÿ:</strong>
              <span
                id="sd-trackingTW"
                style="color: #1a73e8; font-weight: bold"
              ></span>
            </div>
          </div>
          <div id="sd-timeline"></div>
          <div class="modal-section-title">ğŸ‘¤ æ”¶ä»¶äºº</div>
          <div style="background: #f9f9f9; padding: 10px; border-radius: 5px">
            <p style="margin: 5px 0">
              <strong>å§“å:</strong> <span id="sd-name"></span>
            </p>
            <p style="margin: 5px 0">
              <strong>é›»è©±:</strong> <span id="sd-phone"></span>
            </p>
            <p style="margin: 5px 0">
              <strong>åœ°å€:</strong> <span id="sd-address"></span>
            </p>
          </div>
          <div class="modal-section-title">ğŸ’° è²»ç”¨æ˜ç´°</div>
          <div
            id="sd-fee-breakdown"
            style="
              background: #fff3e0;
              padding: 10px;
              border-radius: 5px;
              color: #e65100;
            "
          ></div>
          <div class="modal-section-title">ğŸ›’ è³¼è²·è­‰æ˜</div>
          <div id="sd-proof-images" class="gallery-grid"></div>
        </div>
        <div class="modal-footer sticky-footer-actions">
          <button class="btn btn-primary modal-close-btn">é—œé–‰</button>
        </div>
      </div>
    </div>

    <div id="view-images-modal" class="modal-overlay" style="display: none">
      <div class="modal-content">
        <button class="modal-close">&times;</button>
        <h3>ç…§ç‰‡ç€è¦½</h3>
        <div
          id="images-gallery"
          style="
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 10px;
          "
        ></div>
      </div>
    </div>

    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
    <script>
      // Component Loader & Script Injector (ä¿æŒåŸæ¨£)
      async function loadHtml(id, path) {
        try {
          const res = await fetch(path);
          if (res.ok) document.getElementById(id).innerHTML = await res.text();
          else console.error(`Missing component: ${path}`);
        } catch (e) {
          console.error(`Error loading ${path}`, e);
        }
      }

      Promise.all([
        // Sections
        loadHtml(
          "section-container-packages",
          "components/sections/packages.html"
        ),
        loadHtml(
          "section-container-shipments",
          "components/sections/shipments.html"
        ),
        loadHtml(
          "section-container-recipients",
          "components/sections/recipients.html"
        ),
        loadHtml("section-container-wallet", "components/sections/wallet.html"),
        // Modals
        loadHtml(
          "modal-container-profile-edit",
          "components/modals/profile-edit.html"
        ),
        loadHtml(
          "modal-container-password-change",
          "components/modals/password-change.html"
        ),
        loadHtml(
          "modal-container-shipment-create",
          "components/modals/shipment-create.html"
        ),
        loadHtml("modal-container-deposit", "components/modals/deposit.html"),
        loadHtml(
          "modal-container-bulk-forecast",
          "components/modals/bulk-forecast.html"
        ),
        loadHtml(
          "modal-container-claim-package",
          "components/modals/claim-package.html"
        ),
      ]).then(() => {
        const originalAddEventListener = document.addEventListener;
        document.addEventListener = function (type, listener, options) {
          if (type === "DOMContentLoaded") {
            listener();
          } else {
            originalAddEventListener.call(document, type, listener, options);
          }
        };

        const scripts = [
          "js/apiConfig.js",
          "js/shippingData.js",
          "js/navigation.js",
          "js/dashboard-core.js",
          "js/dashboard-packages.js",
          "js/dashboard-shipments.js",
          "js/dashboard-recipient.js",
          "js/dashboard-wallet.js",
          "js/dashboard-notifications.js",
          "js/dashboard-main.js",
        ];

        const loadScript = (src) => {
          return new Promise((resolve, reject) => {
            const s = document.createElement("script");
            s.src = src;
            s.onload = resolve;
            s.onerror = reject;
            document.body.appendChild(s);
          });
        };

        (async () => {
          for (const src of scripts) {
            await loadScript(src);
          }
        })();
      });
    </script>
  </body>
</html>
}
