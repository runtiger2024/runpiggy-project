<!DOCTYPE html>
<html lang="zh-Hant">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <meta name="theme-color" content="#1a73e8" />
    <meta
      name="description"
      content="小跑豬家具海運專線 - 專業淘寶家具集運，透明費率，一鍵試算"
    />
    <title>小跑豬傢俱海運試算 | 專業集運</title>

    <link rel="icon" href="assets/logo.png" type="image/png" />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <script src="js/styleLoader.js"></script>

    <style>
      body {
        opacity: 0;
        transition: opacity 0.3s ease-in;
      }
      body.loaded {
        opacity: 1;
      }

      /* 公告欄動畫 */
      #announcement-bar {
        display: none;
        padding: 10px;
        text-align: center;
        color: white;
        font-weight: bold;
        position: relative;
        z-index: 1001;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        animation: slideDown 0.5s ease-out;
      }
      @keyframes slideDown {
        from {
          transform: translateY(-100%);
        }
        to {
          transform: translateY(0);
        }
      }
    </style>

    <script>
      // 頁面載入後顯示內容
      window.addEventListener("DOMContentLoaded", () =>
        document.body.classList.add("loaded")
      );
    </script>
  </head>

  <body class="shopping-theme">
    <div id="announcement-bar"></div>

    <header class="site-header">
      <div class="header-container">
        <a href="index.html" class="logo-link">
          <img src="assets/logo.png" alt="小跑豬集運" class="header-logo-img" />
          <span class="logo-text">
            小跑豬
            <small>家具海運專線</small>
          </span>
        </a>

        <div class="header-search">
          <div class="search-wrapper">
            <input
              type="text"
              id="areaSearch"
              placeholder="輸入配送地區 (例: 宜蘭、淡水)..."
              autocomplete="off"
              inputmode="search"
              enterkeyhint="search"
            />
            <button class="search-btn" aria-label="搜尋">
              <i class="fas fa-search"></i>
            </button>
          </div>
          <div id="searchResults" class="search-dropdown"></div>
        </div>

        <nav class="header-nav main-nav"></nav>
      </div>
    </header>

    <div class="container main-content">
      <div class="warehouse-card">
        <div class="warehouse-header">
          <div class="wh-title">
            <div class="wh-icon"><i class="fas fa-warehouse"></i></div>
            <h3>傢俱倉地址 <span class="badge-official">官方認證</span></h3>
          </div>
          <button
            id="copyAddressBtn"
            class="btn btn-outline-primary btn-sm"
            style="border-radius: 20px"
          >
            <i class="far fa-copy"></i> 一鍵複製
          </button>
        </div>

        <div class="warehouse-body" id="warehouseAddressBox">
          <div class="wh-info-row">
            <span class="label">收件人</span>
            <span class="value" id="wh-recipient">小跑豬+[您的姓名]</span>
          </div>
          <div class="wh-info-row">
            <span class="label">電話</span>
            <span class="value" id="wh-phone">13652554906</span>
          </div>
          <div class="wh-info-row">
            <span class="label">郵編</span>
            <span class="value" id="wh-zip">523920</span>
          </div>
          <div class="wh-info-row full-width">
            <span class="label">倉庫地址</span>
            <span class="value" id="wh-address">載入中...</span>
            <div class="wh-notice">
              <i class="fas fa-exclamation-circle"></i>
              請務必在收件人後方加上您的會員姓名或 ID，以免包裹無法識別。
            </div>
          </div>
        </div>
      </div>

      <div class="rate-section-wrapper">
        <div class="section-header-row">
          <h3><i class="fas fa-tags"></i> 收費標準</h3>
          <button
            class="btn btn-secondary btn-sm"
            onclick="document.getElementById('rate-details-panel').classList.toggle('hidden')"
          >
            查看詳情 <i class="fas fa-chevron-down"></i>
          </button>
        </div>

        <div id="rate-details-panel" class="rate-details hidden">
          <div class="rate-table-container">
            <table class="rate-table">
              <thead>
                <tr>
                  <th>類別</th>
                  <th>說明</th>
                  <th>重量費率 (KG)</th>
                  <th>材積費率 (材)</th>
                </tr>
              </thead>
              <tbody id="rate-table-body">
                <tr>
                  <td
                    colspan="4"
                    style="text-align: center; padding: 20px; color: #999"
                  >
                    載入費率中...
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="rate-notes">
            <strong><i class="fas fa-info-circle"></i> 注意事項：</strong>
            <ul id="rate-notes-list">
              <li>載入中...</li>
            </ul>
          </div>
        </div>
      </div>

      <div id="calculator-section" class="calculator-wrapper section-card">
        <div class="section-header-row">
          <h3><i class="fas fa-calculator"></i> 運費試算</h3>
          <span style="font-size: 12px; color: #999">
            已有
            <span id="usageCount" style="color: #ff5000; font-weight: bold"
              >5000+</span
            >
            人使用
          </span>
        </div>

        <div id="item-list" class="shopping-list"></div>

        <div style="padding: 0 20px 20px 20px">
          <button id="btn-add-item" class="btn-dashed-add">
            <i class="fas fa-plus"></i> 加入下一件商品
          </button>
        </div>

        <div
          class="delivery-block"
          style="border-top: 1px solid #eee; padding: 20px"
        >
          <div class="form-group" style="margin-bottom: 0">
            <label
              for="deliveryLocation"
              style="
                font-size: 15px;
                margin-bottom: 10px;
                display: flex;
                align-items: center;
              "
            >
              <i
                class="fas fa-map-marker-alt"
                style="color: #ff5000; margin-right: 8px"
              ></i>
              配送目的地 <span class="required">*</span>
            </label>
            <select
              id="deliveryLocation"
              class="form-control"
              style="font-size: 16px; padding: 12px"
            >
              <option value="" selected disabled>--- 載入地區資料中 ---</option>
            </select>

            <div
              id="remoteAreaInfo"
              class="alert alert-info"
              style="display: none; margin-top: 10px; font-size: 13px"
            >
              <i class="fas fa-info-circle"></i>
              已選擇：<strong id="selectedAreaName"></strong>
              <span
                id="selectedAreaFee"
                style="color: #d32f2f; margin-left: 5px; font-weight: bold"
              ></span>
            </div>
          </div>
        </div>
      </div>

      <div id="loading-spinner" class="loading-overlay" style="display: none">
        <div class="spinner"></div>
        <p style="color: #333; margin-top: 15px; font-weight: 500">
          正在精算運費...
        </p>
      </div>

      <div
        id="error-message"
        class="alert alert-error"
        style="display: none"
      ></div>

      <div id="results-container" style="display: none; margin-top: 20px"></div>

      <div style="height: 100px"></div>
    </div>

    <footer class="site-footer">
      <div class="site-footer__container">
        <div class="footer-links">
          <a href="https://lin.ee/eK6HptX" target="_blank" class="nav-link">
            <i class="fab fa-line"></i> LINE 客服
          </a>
          <a href="mailto:2runtigers@gmail.com" class="nav-link">
            <i class="fas fa-envelope"></i> Email
          </a>
        </div>
        <div class="site-footer__copyright">
          © 2025 兩隻老虎國際貿易有限公司<br />
          <a
            href="admin-login.html"
            style="color: #ccc; font-size: 12px; text-decoration: none"
            >管理員登入</a
          >
        </div>
      </div>
    </footer>

    <div class="sticky-footer-bar">
      <div class="footer-content">
        <div class="footer-total">
          <span class="text">預估總運費：</span>
          <span class="price" id="sticky-total-price">請點擊計算</span>
        </div>
        <button type="button" id="btn-calculate" class="btn btn-checkout">
          開始計算
        </button>
      </div>
    </div>

    <nav class="mobile-bottom-nav" id="mobile-bottom-nav"></nav>

    <script src="js/apiConfig.js"></script>
    <script src="js/shippingData.js"></script>
    <script src="js/navigation.js"></script>
    <script src="js/main.js"></script>
  </body>
</html>
